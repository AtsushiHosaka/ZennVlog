# Zennハッカソン

## はじめに: 動画を身近な存在にする

私たちは大学生 4 人チームです。  
日常ではショート動画を毎日のように見ている一方で、「自分で動画を作る」行為は多くの同世代にとってまだ遠い存在だと感じてきました。

写真はその場で撮ってすぐ共有できます。  
しかし動画は、撮る前に構成を考え、撮影中に順番を管理し、最後に編集して完成させる必要があります。  
この工程の多さが、動画を「見るもの」で止めてしまい、「作るもの」に変えられない壁になっています。

私たちの問題意識はシンプルです。  
**動画を、写真に近い心理的距離まで引き寄せたい。**

ZennVlog は、そのために作った iOS アプリです。  
AI チャットで構成を決め、撮影をセグメント単位でガイドし、最後は字幕・BGM まで統合して書き出す。  
企画から公開直前までを 1 つの体験にまとめることで、動画制作の完走率を上げることを目指しています。

## 背景: なぜ若い層でも動画は身近ではないのか

「若い層は動画に慣れているはず」という見方は、視聴体験には当てはまります。  
一方で制作体験には、次のようなギャップが残っています。

1. 視聴と制作のギャップ  
   見る量は増えていても、作るための具体的な手順は共有されにくい。
2. センス依存のギャップ  
   「面白い構成を思いつける人だけが作れる」と感じやすい。
3. 完走のギャップ  
   撮影を始めても編集工程で止まりやすい。

私たちはこのギャップを、単なる UI の問題ではなく、**制作フロー全体の分断**として捉えました。  
ここを埋めない限り、動画は一部の慣れた人の表現手段にとどまり、発信の裾野は広がらないと考えています。

## 課題設定（課題の新規性）

ZennVlog では、課題を「企画」「撮影」「編集」「完走率」の 4 層で定義しました。

### 課題 1: 企画負荷

何をどの順で撮るかを最初に決める必要があり、ここで手が止まる。  
結果として「撮り始める前に挫折」するケースが多い。

### 課題 2: 撮影負荷

撮影時に次のアクション判断を続ける必要があり、素材の取り漏れが発生する。  
撮影体験が「創作」より「段取り管理」に寄ってしまう。

### 課題 3: 編集負荷

素材整理、字幕、BGM、尺調整などの後工程が重く、完成まで到達しない。  
特に初心者にとっては、編集画面に入ってからが最も離脱しやすい。

### 課題 4: 完走率の低さ

企画から編集が分断されているため、各フェーズで判断コストが積み上がる。  
この累積が、最終的に「投稿されない下書き動画」を増やしている。

既存ツールは編集機能の深さに強みがありますが、企画から撮影までの意思決定を一気通貫で支える設計は十分ではありません。  
**この分断解消こそが本プロジェクトの新規性**です。

## 目的

私たちの目的は、動画制作を高度な編集スキルの世界から引き戻し、  
「まず 1 本完成させる」体験を誰でも得られるものにすることです。

言い換えると、評価軸は次の 2 点です。

1. 撮り始めるまでの心理的ハードルを下げる
2. 書き出し完了までの完走率を上げる

## 解決策: AIエージェントで制作フローを一本化（解決策の有効性）

### 利用フロー（入力 -> 処理 -> 出力）

#### 入力

- ユーザーがチャットで「作りたい動画」を自然言語で入力
- 必要に応じて動画素材を添付

#### 処理

- Chat UseCase が Function Calling ループを実行し、`templateSearch` / `videoSummary` / `generateCustomTemplate` を使い分ける
- 無限ループ防止のため、実装上は最大 5 イテレーションで制御
- 動画解析は同期 API 直叩きではなく、`createVideoAnalysisJob(storagePath, mimeType, durationSec, projectId?)` でジョブ化
- ジョブは `video_analysis_jobs` 上で `queued -> processing -> completed/failed` を遷移し、結果を確定保存

#### 出力

- セグメント情報を持つテンプレートを生成/提案
- 撮影フェーズでセグメント単位に素材を割り当て
- 最後に `videoAssets + subtitles + segments + bgm` を統合して書き出し

### 仮説効果

仮説として、ZennVlog は以下に有効です。

1. 企画時の意思決定回数を減らす
2. 撮影中の迷いを減らす
3. 編集着手後の離脱を減らし、初回投稿までの到達率を改善する

## 技術のこだわり（実装品質と拡張性）

ここは、今回特に深くこだわったポイントです。

### 1. テンプレートデータを「人手で作る」ことに投資した

チャット品質はモデル性能だけで決まりません。  
私たちは、チャットが返す提案の土台としてテンプレートデータを重視しました。

- チームで参考動画を 30 本以上選定
- 各動画を「構成の型」に分解
- `segments`（`order`, `startSec`, `endSec`, `description`）として構造化
- Firestore の `templates` コレクションへ投入できる形に統一

この工程により、チャットは抽象的な助言ではなく、  
「撮影順まで落ちた具体的提案」を返せるようになります。

また、テンプレート登録は `scripts/add-template-to-firestore.js` で再現可能にし、  
感覚的運用ではなくデータ追加プロセスとして管理できるようにしました。

### 2. Function Calling を中心に、チャットを実行系にした

会話だけで終わらず、処理が進むチャットを目標にしています。

- `SendMessageWithAIUseCase` でツール呼び出しをオーケストレーション
- ツール実行結果を会話コンテキストへ戻し、次ターンの応答品質を上げる
- `templateSearch` で候補探索、`videoSummary` で素材理解、`generateCustomTemplate` で生成を担当

この構成により、ユーザー入力が「説明」ではなく「制作フローを前進させる操作」になります。

### 3. 動画解析は非同期ジョブ化して信頼性を優先

動画解析は重処理なので、アプリ内で抱え込まず Cloud Functions 側に分離しました。

- Callable Function がジョブを作成
- Firestore Trigger が解析パイプラインを実行
- Cloud Video Intelligence でショット境界検出
- Vertex AI Gemini で視覚要約
- 正規化して結果を保存し、入力動画は削除

さらに、入力制約も明確化しています。

- 最大 180 秒
- 最大 300MB
- Storage パスは `video-analysis-inputs/{uid}` 配下のみ許可

これにより、PoC でも「動けばよい」ではなく、運用時に破綻しにくい基盤を優先しました。

### 4. セキュリティルールを先に固めた

AI 機能の PoC は、動作優先で権限設計が後回しになりがちです。  
本プロジェクトでは、最小権限を先に決めています。

- Firestore: `video_analysis_jobs` の create/update/delete をクライアントから禁止
- Firestore: 参照は認証済みかつ本人ジョブのみ許可
- Storage: 入力動画の書き込みは本人 UID 配下のみ

「最初は緩く」ではなく、「最初から閉じる」を選んだ点が技術的な意思決定です。

### 5. アーキテクチャを拡張前提で設計した

`DIContainer` による依存性注入で Live/Mock を切替可能にし、  
機能検証と本番連携を同じ UseCase で回せるようにしました。

また、`ProjectLifecycleManager` で `recording / editing / completed` を明示的に遷移管理しています。  
状態遷移をコードで固定することで、機能追加時の副作用を抑えています。

書き出しもセグメント中心で統合しており、字幕オーバーレイ、BGM ミックス、エクスポート進捗通知までを一連のパイプラインとして実装しています。

## 審査基準への対応整理

| 審査基準 | 本プロジェクトでの主張 |
|---|---|
| 課題の新規性 | 問題は編集単体ではなく、企画・撮影・編集の分断にある。若い層でも「見る」と「作る」が乖離している点に着目した。 |
| 解決策の有効性 | Function Calling と非同期動画解析ジョブにより、会話入力を具体的な制作アクションへ変換できる。 |
| 実装品質と拡張性 | DI/Repository 分離、最小権限ルール、状態遷移管理、統合エクスポートにより、PoC でも運用を見据えた設計になっている。 |

## 運用性と今後の展開

現時点では、実ユーザーでの定量 KPI はまだ未計測です。  
ここは断定せず、競技後に計測設計を進めます。

追跡する主指標は次の 3 つです。

1. 投稿完了率（開始ユーザーのうち最終書き出しまで到達した割合）
2. 1 本完成までの時間（初回入力から書き出し完了まで）
3. 再編集率（同一プロジェクトの再開回数）

加えて、テンプレート提案精度の改善方針は以下です。

- テンプレート母数の継続拡張
- ジャンル別のセグメント粒度の見直し
- 失敗セッション分析による質問フロー最適化

## まとめ

ZennVlog は、動画制作を「編集機能の提供」ではなく、  
**企画から完走までを支える制作導線の提供**として再定義したプロジェクトです。

大学生 4 人チームとして、同世代の「動画を見るのに作らない」乖離を実感し、  
その原因を制作フロー分断として解きほぐし、AI エージェントと実装基盤で埋めることに挑戦しました。

動画をもっと身近にするためには、モデル精度だけでなく、  
テンプレートデータ設計、ジョブ基盤、権限設計、状態遷移管理まで一体で作る必要があります。  
本プロジェクトはその土台を構築した PoC であり、次フェーズでは KPI 計測を通じて有効性を定量で証明していきます。
