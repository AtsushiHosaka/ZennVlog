---
title: "å‹•ç”»åˆ¶ä½œã‚’ã€Œå®Œèµ°ã§ãã‚‹ä½“é¨“ã€ã¸â€”â€”AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒä¼ç”»ã‹ã‚‰æ›¸ãå‡ºã—ã¾ã§ã‚’ä¸€æœ¬ã®ãƒ¬ãƒ¼ãƒ«ã«ã™ã‚‹"
emoji: "ğŸ¬"
type: "idea"
topics: ["gch4", "ios", "swiftui", "firebase", "vertexai"]
published: false
---

:::message
ã“ã®è¨˜äº‹ã¯ **[ç¬¬4å› Agentic AI Hackathon with Google Cloud](https://zenn.dev/hackathons/google-cloud-japan-ai-hackathon-vol4)** ã¸ã®æå‡ºä½œå“ã§ã™ã€‚
å¤§å­¦ç”Ÿ4äººãƒãƒ¼ãƒ ãŒã€iOSã‚¢ãƒ—ãƒª Ã— Vertex AI Gemini Ã— Firebase ã§ã€Œå‹•ç”»åˆ¶ä½œã®å®Œèµ°ç‡ã€ã«æŒ‘ã¿ã¾ã—ãŸã€‚
:::

## ãƒ‡ãƒ¢å‹•ç”»ï¼ˆç´„3åˆ†ï¼‰

<!-- ä½œæˆã—ãŸYouTubeå‹•ç”»ã®IDã‚’ã“ã“ã«å…¥ã‚Œã¦ãã ã•ã„ -->

@[youtube](YOUR_YOUTUBE_VIDEO_ID)

---

## 1. å‹•ç”»ã‚’ã€Œè¦‹ã‚‹ã‚‚ã®ã€ã§æ­¢ã‚ã¦ã—ã¾ã†ã€ã‚ã®æ„Ÿè¦š

ç§ãŸã¡ã¯å¤§å­¦ç”Ÿ4äººãƒãƒ¼ãƒ ã§ã™ã€‚ã‚·ãƒ§ãƒ¼ãƒˆå‹•ç”»ã‚’æ¯æ—¥ã®ã‚ˆã†ã«æ¶ˆè²»ã—ãªãŒã‚‰ã€ä¸æ€è­°ãªæ„Ÿè¦šã‚’ãšã£ã¨å…±æœ‰ã—ã¦ãã¾ã—ãŸã€‚

ã€Œæ¯æ—¥å‹•ç”»ã‚’è¦‹ã¦ã„ã‚‹ã®ã«ã€ãªãœè‡ªåˆ†ã§ã¯1æœ¬ã‚‚æŠ•ç¨¿ã—ãŸã“ã¨ãŒãªã„ã‚“ã ã‚ã†ã€‚ã€

å†™çœŸã¯é•ã„ã¾ã™ã€‚æ’®ã£ã¦ã™ãã€å‹äººã«é€ã‚Œã‚‹ã€‚ç·¨é›†ã™ã‚‹ã«ã—ã¦ã‚‚ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’1ã¤é¸ã¹ã°ã„ã„ã€‚ã¨ã“ã‚ãŒå‹•ç”»ã¨ãªã£ãŸé€”ç«¯ã«ã€è©±ãŒã¾ã£ãŸãå¤‰ã‚ã‚Šã¾ã™ã€‚ä½•ã‚’æ’®ã‚‹ã‹æ§‹æˆã‚’è€ƒãˆã€æ’®å½±ä¸­ã¯ã€Œæ¬¡ã®ã‚·ãƒ¼ãƒ³ã¯ä½•ã ã£ã‘ã€ã¨æ®µå–ã‚Šã‚’å›ã—ç¶šã‘ã€å…¨éƒ¨æ’®ã‚Šçµ‚ãˆãŸã‚‰ä»Šåº¦ã¯ç´ æã®æ•´ç†ã€å­—å¹•ã€BGMã€å°ºã®èª¿æ•´ã€‚å·¥ç¨‹ã¯å¤šãã€ã©ã“ã‹ã§æ‰‹ãŒæ­¢ã¾ã‚‹ã¨å…¨éƒ¨ãŒã€Œä¸‹æ›¸ãã€ã®ã¾ã¾æ¶ˆãˆã¦ã„ãã€‚

åŒä¸–ä»£ã®å‹äººã«èã„ã¦ã¿ã‚‹ã¨ã€åå¿œã¯é©šãã»ã©ä¼¼é€šã£ã¦ã„ã¾ã—ãŸã€‚ã€Œæ§‹æˆã‚’è€ƒãˆã‚‹æ®µéšã§ã‚„ã‚‹æ°—ãŒãªããªã‚‹ã€ã€Œæ’®ã‚Šçµ‚ãˆãŸã‚ã¨ã®ç·¨é›†ãŒé¢å€’ã§æ”¾ç½®ã—ã¦ã„ã‚‹ã€ã€Œã‚»ãƒ³ã‚¹ãŒãªã„ã¨ä½œã‚Œãªã„ã¨æ€ã£ã¦ã„ã‚‹ã€ã€‚è¦–è´ã¨åˆ¶ä½œã®é–“ã«ã¯ã€æŠ€è¡“çš„ã¨ã„ã†ã‚ˆã‚Šã‚‚**ãƒ•ãƒ­ãƒ¼çš„ãªæ–­çµ¶**ãŒã‚ã‚‹ã¨æ°—ã¥ã„ãŸã®ã¯ã€ã“ã®ã¨ãã§ã—ãŸã€‚

ç§ãŸã¡ãŒä½œã‚ŠãŸã‹ã£ãŸã®ã¯ã€é«˜æ©Ÿèƒ½ãªç·¨é›†ãƒ„ãƒ¼ãƒ«ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚**ä¼ç”»ã‹ã‚‰æ›¸ãå‡ºã—ã¾ã§ã‚’ã€1æœ¬ã®ãƒ¬ãƒ¼ãƒ«ã®ä¸Šã§èµ°ã‚‰ã›ã‚‹ä½“é¨“**ã§ã™ã€‚

---

## 2. å•é¡Œã®è§£å‰–â€”â€”ãªãœã€Œå®Œèµ°ã§ããªã„ã€ã®ã‹

ã€Œè‹¥ã„å±¤ã¯å‹•ç”»ã«æ…£ã‚Œã¦ã„ã‚‹ã¯ãšã€ã¨ã„ã†è¦‹æ–¹ã¯ã€è¦–è´ä½“é¨“ã«ã¯å½“ã¦ã¯ã¾ã‚Šã¾ã™ã€‚ã—ã‹ã—åˆ¶ä½œä½“é¨“ã«ã¯ã€ã¾ã£ãŸãåˆ¥ã®ã‚®ãƒ£ãƒƒãƒ—ãŒæ®‹ã£ã¦ã„ã¾ã™ã€‚CapCutã‚„Final Cutã®ã‚ˆã†ãªå„ªã‚ŒãŸç·¨é›†ã‚¢ãƒ—ãƒªãŒå­˜åœ¨ã—ã¦ã‚‚å®Œèµ°ç‡ãŒä¸ŠãŒã‚‰ãªã„ã®ã¯ã€å•é¡ŒãŒåˆ¥ã®å ´æ‰€ã«ã‚ã‚‹ã‹ã‚‰ã ã¨ç§ãŸã¡ã¯è€ƒãˆã¾ã—ãŸã€‚

**ä¼ç”»ãƒ•ã‚§ãƒ¼ã‚º**ã§ã¯ã€ã€Œä½•ã‚’ã©ã®é †ç•ªã§æ’®ã‚‹ã‹ã€ã¨ã„ã†æ„æ€æ±ºå®šã®é‡ã•ãŒè¶³ã‹ã›ã«ãªã‚Šã¾ã™ã€‚é¢ç™½ã„æ§‹æˆã¯ã€ã‚»ãƒ³ã‚¹ãŒã‚ã‚‹äººã ã‘ãŒæ€ã„ã¤ãã‚‚ã®ã ã¨ã„ã†æ€ã„è¾¼ã¿ãŒã€æ’®å½±é–‹å§‹å‰ã«å¤šãã®äººã‚’æ­¢ã‚ã¦ã—ã¾ã„ã¾ã™ã€‚

**æ’®å½±ãƒ•ã‚§ãƒ¼ã‚º**ã§ã¯ã€ã€Œæ¬¡ã«æ’®ã‚‹ã¹ãç´ æã€ã‚’é ­ã®ä¸­ã§åˆ¤æ–­ã—ãªãŒã‚‰ã€åŒæ™‚ã«ã€Œæ’®ã‚‹ã“ã¨ã€ã«é›†ä¸­ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ãªä½“é¨“ãŒã€æ®µå–ã‚Šç®¡ç†ã®ä½“é¨“ã«å¤‰è³ªã—ã¦ã—ã¾ã„ã¾ã™ã€‚

**ç·¨é›†ãƒ•ã‚§ãƒ¼ã‚º**ã§ã¯ã€ç´ æã®é‡ã¨ç¨®é¡ãŒä¸€æ°—ã«å¢—ãˆã€åˆå¿ƒè€…ã«ã¨ã£ã¦æœ€ã‚‚é›¢è„±ã—ã‚„ã™ã„å ´æ‰€ã«ãªã‚Šã¾ã™ã€‚ã“ã“ã¾ã§ç¶šã‘ã¦ããŸãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ãŒã€ç´ ææ•´ç†ã¨ã„ã†äº‹å‹™ä½œæ¥­ã§æ¶ˆãˆã¦ã„ãã€‚

çµæœã¨ã—ã¦ã€å„ãƒ•ã‚§ãƒ¼ã‚ºã§ç©ã¿ä¸ŠãŒã£ãŸåˆ¤æ–­ã‚³ã‚¹ãƒˆã®ç·é‡ãŒã€ŒæŠ•ç¨¿ã•ã‚Œãªã„ä¸‹æ›¸ãå‹•ç”»ã€ã‚’é‡ç”£ã—ç¶šã‘ã¾ã™ã€‚æ—¢å­˜ãƒ„ãƒ¼ãƒ«ã¯ãƒ•ã‚§ãƒ¼ã‚ºå˜ä½“ã«ã¯å¼·ã„ã§ã™ãŒã€**ãƒ•ã‚§ãƒ¼ã‚ºé–“ã®é€£ç¶šæ€§ã‚’è¨­è¨ˆã—ãŸã‚‚ã®ã¯å­˜åœ¨ã—ãªã„**ã€‚ã“ã‚ŒãŒç§ãŸã¡ãŒç«‹ã£ãŸå ´æ‰€ã§ã™ã€‚

---

## 3. ZennVlogã¨ã¯ä½•ã‹â€”â€”AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ã€Œä¼´èµ°è€…ã€ã«ã™ã‚‹

ZennVlogã¯iOSã‚¢ãƒ—ãƒªã§ã™ã€‚ã¾ãšã€ŒãªãœiOSã‹ã€ã¨ã„ã†å•ã„ã«ç­”ãˆã¾ã™ã€‚

å‹•ç”»ã®ç´ æã¯ç¾å ´ã§ç”Ÿã¾ã‚Œã¾ã™ã€‚å‹äººã¨ã®å¤–å‡ºå…ˆã€æ—…å…ˆã€ã‚¤ãƒ™ãƒ³ãƒˆä¼šå ´â€”â€”åˆ¶ä½œã®ãã£ã‹ã‘ã¨ãªã‚‹ç¬é–“ã¯ã€ãƒ‡ã‚¹ã‚¯ã®å‰ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãƒã‚±ãƒƒãƒˆã«ã‚ã‚‹ãƒ‡ãƒã‚¤ã‚¹ã§ã€æ’®å½±ã®ç›´å‰ã«æ§‹æˆã‚’æ•´ç†ã—ã€æ’®å½±ä¸­ã«ã‚¬ã‚¤ãƒ‰ã‚’å—ã‘å–ã‚Šã€ç§»å‹•ä¸­ã«æ›¸ãå‡ºã—ã¾ã§å®Œäº†ã§ãã‚‹ã€‚ã“ã®ä½“é¨“ã¯ãƒ¢ãƒã‚¤ãƒ«ã§ãªã‘ã‚Œã°æˆç«‹ã—ã¾ã›ã‚“ã€‚AVFoundationã«ã‚ˆã‚‹ã‚«ãƒ¡ãƒ©ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆ¶å¾¡ã€async/awaitã«ã‚ˆã‚‹ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡¦ç†ã®æˆç†Ÿåº¦ãŒã€PoCæ®µéšã§ã‚‚å®Ÿç”¨çš„ãªå“è³ªã‚’æ‹…ä¿ã§ãã‚‹ã¨åˆ¤æ–­ã—ãŸæŠ€è¡“çš„èƒŒæ™¯ã‚‚ã‚ã‚Šã¾ã™ã€‚

ã‚¢ãƒ—ãƒªã®ä½“é¨“ã¯ã€å¤§ãã3ã¤ã®ãƒ•ã‚§ãƒ¼ã‚ºã§æ§‹æˆã•ã‚Œã¾ã™ã€‚

**ä¼ç”»ãƒ•ã‚§ãƒ¼ã‚º**ã§ã¯ã€ãƒãƒ£ãƒƒãƒˆç”»é¢ã«ã€Œå‹äººã®èª•ç”Ÿæ—¥ã‚µãƒ—ãƒ©ã‚¤ã‚ºã®å‹•ç”»ã‚’ä½œã‚ŠãŸã„ã€ã¨æ‰“ã¡è¾¼ã‚€ã ã‘ã§ã„ã„ã€‚AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒéå»ã®æˆåŠŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’æ¤œç´¢ã—ã€ç´ æã¨ã—ã¦å‹•ç”»ã‚’æ·»ä»˜ã™ã‚Œã°å†…å®¹ã‚’è§£æã—ã¦ã€æœ€çµ‚çš„ã«ã€Œæ’®å½±é †ã¨æ‰€è¦æ™‚é–“ãŒæ±ºã¾ã£ãŸã‚»ã‚°ãƒ¡ãƒ³ãƒˆãƒªã‚¹ãƒˆã€ã‚’è¿”ã—ã¾ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã‚»ãƒ³ã‚¹ã‚’å•ã‚ã‚Œã‚‹ã“ã¨ãªãã€æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã«é€²ã‚ã‚‹çŠ¶æ…‹ã‚’æ‰‹ã«å…¥ã‚Œã¾ã™ã€‚

**æ’®å½±ãƒ•ã‚§ãƒ¼ã‚º**ã§ã¯ã€ãã®ã‚»ã‚°ãƒ¡ãƒ³ãƒˆãƒªã‚¹ãƒˆãŒã‚¬ã‚¤ãƒ‰ã«ãªã‚Šã¾ã™ã€‚ã€Œä»Šã€ä½•ã‚’æ’®ã‚‹ã¹ãã‹ã€ãŒå¸¸ã«ç”»é¢ã«è¡¨ç¤ºã•ã‚Œã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å‰µä½œã«é›†ä¸­ã§ãã¾ã™ã€‚ç´ æã®å–ã‚Šæ¼ã‚ŒãŒæ§‹é€ çš„ã«é˜²ãŒã‚Œã‚‹ä»•çµ„ã¿ã§ã™ã€‚

**æ›¸ãå‡ºã—ãƒ•ã‚§ãƒ¼ã‚º**ã§ã¯ã€åé›†ã—ãŸç´ æã«å­—å¹•ãƒ»BGMãƒ»ã‚»ã‚°ãƒ¡ãƒ³ãƒˆæƒ…å ±ã‚’çµ±åˆã—ã€å®Œæˆå“ã¨ã—ã¦å‡ºåŠ›ã—ã¾ã™ã€‚ç·¨é›†åˆ¤æ–­ã‚’ã»ã¼ã‚¼ãƒ­ã«ã™ã‚‹ã“ã¨ã§ã€ã€Œã“ã“ã§æ­¢ã¾ã‚‹ã€ã¨ã„ã†ä½“é¨“ã‚’ãªãã—ã¦ã„ã¾ã™ã€‚

### ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```mermaid
graph TD
    subgraph iOSApp["iOS App"]
        A["ãƒãƒ£ãƒƒãƒˆç”»é¢ / ChatView"] -->|è‡ªç„¶è¨€èªå…¥åŠ›| B["SendMessageWithAI UseCase"]
        B -->|"Function Calling Loop / max 5 iterations"| C{"Tool Selection"}
        C -->|ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ¤œç´¢| D["templateSearch"]
        C -->|å‹•ç”»ç†è§£| E["videoSummary"]
        C -->|ã‚«ã‚¹ã‚¿ãƒ ç”Ÿæˆ| F["generateCustomTemplate"]
        D -->|çµæœã‚’ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¸æˆ»ã™| B
        E -->|çµæœã‚’ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¸æˆ»ã™| B
        F -->|çµæœã‚’ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¸æˆ»ã™| B
        B -->|ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç¢ºå®š| G["æ’®å½±ç”»é¢ / RecordingView"]
        G -->|ã‚»ã‚°ãƒ¡ãƒ³ãƒˆå˜ä½ã§ç´ æåé›†| H["æ›¸ãå‡ºã—ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³"]
        H -->|"videoAssets + subtitles + bgm"| I["å®Œæˆå‹•ç”»"]
    end

    subgraph GCP["Firebase / Google Cloud"]
        B <-->|Vertex AI Gemini| J["LLM"]
        E -->|å‹•ç”»ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰| K["Cloud Storage / video-analysis-inputs/uid"]
        K --> L["Cloud Functions / createVideoAnalysisJob"]
        L -->|ã‚¸ãƒ§ãƒ–ä½œæˆ| M[("Firestore / video_analysis_jobs")]
        M -->|Trigger| N["Cloud Functions / è§£æãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³"]
        N -->|ã‚·ãƒ§ãƒƒãƒˆå¢ƒç•Œæ¤œå‡º| O["Cloud Video Intelligence"]
        N -->|è¦–è¦šè¦ç´„| P["Vertex AI Gemini"]
        O -->|æ­£è¦åŒ–ãƒ»ä¿å­˜| M
        P -->|æ­£è¦åŒ–ãƒ»ä¿å­˜| M
        M -->|"queued â†’ processing â†’ completed"| Q["çµæœã‚’ã‚¢ãƒ—ãƒªã¸åæ˜ "]
    end

    subgraph Security["ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¢ƒç•Œ"]
        R["Firestore Rules / ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã® write ç¦æ­¢"]
        S["Storage Rules / æœ¬äºº UID é…ä¸‹ã®ã¿æ›¸ãè¾¼ã¿è¨±å¯"]
    end
```

---

## 4. ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ã©ã†ã€Œè€ƒãˆã¦ã€å‹•ã„ã¦ã„ã‚‹ã‹â€”â€”Agenticæ€§ã®è¨¼æ˜

ãŸã AIã®APIã‚’å©ãã ã‘ã®ã‚¢ãƒ—ãƒªã¨ã€AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå‹•ãã‚¢ãƒ—ãƒªã®é•ã„ã¯ä½•ã‹ã€‚ç§ãŸã¡ãŒæœ€ã‚‚æ„è­˜ã—ãŸã®ã¯ã“ã®å•ã„ã§ã™ã€‚

ZennVlogã®ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ã®ä¸­æ ¸ã¯`SendMessageWithAIUseCase`ã§ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œæ—…è¡ŒVlogã‚’ä½œã‚ŠãŸã„ã€ã“ã®å‹•ç”»ç´ æã‚‚ä½¿ã£ã¦ã€ã¨é€ã‚‹ã¨ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯å˜ç´”ã«ç­”ãˆã‚’è¿”ã—ã¾ã›ã‚“ã€‚ã¾ãšçŠ¶æ³ã‚’æŠŠæ¡ã™ã‚‹ãŸã‚ã®**è¨ˆç”»**ã‚’ç«‹ã¦ã¾ã™ã€‚ã€Œç´ æå‹•ç”»ãŒã‚ã‚‹ãªã‚‰å†…å®¹ã‚’æŠŠæ¡ã™ã¹ãã ã€ã¨åˆ¤æ–­ã—ã€`videoSummary`ãƒ„ãƒ¼ãƒ«ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚

```swift
// SendMessageWithAIUseCase.swiftï¼ˆæ¦‚å¿µçš„ãªå®Ÿè£…ï¼‰
func sendMessageWithFunctionCalling(userMessage: String) async throws -> String {
    var conversationHistory = buildHistory(userMessage)
    var iterationCount = 0

    while iterationCount < maxIterations {
        let response = try await vertexAI.generate(
            messages: conversationHistory,
            tools: [templateSearch, videoSummary, generateCustomTemplate]
        )

        // ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—ãŒç™ºç”Ÿã—ãŸã‹è¦³å¯Ÿ
        guard let toolCall = response.toolCall else {
            // æœ€çµ‚çš„ãªè‡ªç„¶è¨€èªãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™
            return response.text
        }

        // ãƒ„ãƒ¼ãƒ«ã‚’å®Ÿè¡Œã—ã€çµæœã‚’ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¸æˆ»ã™ï¼ˆãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ«ãƒ¼ãƒ—ï¼‰
        let toolResult = try await executeTool(toolCall)
        conversationHistory.append(.toolResult(toolResult))
        iterationCount += 1
    }
    return fallbackResponse
}
```

ç´ æã®è§£æãŒçµ‚ã‚ã‚‹ã¨ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯æ¬¡ã«ã€Œã©ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒåˆã†ã‹ã€ã‚’**å®Ÿè¡Œ**ã—ã¾ã™ã€‚`templateSearch`ã§Firestoreã‹ã‚‰å€™è£œã‚’å–å¾—ã—ã€ãã®çµæœã‚’å†ã³ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«ç©ã¿ä¸Šã’ã¦æ¬¡ã®ã‚¿ãƒ¼ãƒ³ã®ç²¾åº¦ã‚’é«˜ã‚ã¾ã™ã€‚æœ€çµ‚çš„ã«æ—¢å­˜ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒåˆã‚ãªã‘ã‚Œã°`generateCustomTemplate`ã§æ–°è¦ç”Ÿæˆã™ã‚‹ã€ã¨ã„ã†åˆ¤æ–­ã‚‚è‡ªå¾‹çš„ã«è¡Œã‚ã‚Œã¾ã™ã€‚

è¨ˆç”»â†’å®Ÿè¡Œâ†’è¦³å¯Ÿï¼ˆãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼‰ã®ãƒ«ãƒ¼ãƒ—ãŒæœ€å¤§5ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å›ã‚‹ã“ã¨ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€Œè³ªå•ã«ç­”ãˆã¦ã„ã‚‹ã€ã®ã§ã¯ãªãã€ã€Œåˆ¶ä½œãƒ•ãƒ­ãƒ¼ãŒå‰ã«é€²ã‚“ã§ã„ã‚‹ã€æ„Ÿè¦šã‚’å¾—ã‚‰ã‚Œã¾ã™ã€‚ã“ã‚ŒãŒã“ã®ã‚¢ãƒ—ãƒªã«ãŠã‘ã‚‹Agenticæ€§ã®æœ¬è³ªã§ã™ã€‚

### ãªãœVertex AI Geminiã‚’é¸ã‚“ã ã‹

Function Callingã®ãƒ„ãƒ¼ãƒ«ã‚¹ã‚­ãƒ¼ãƒã‚’ãƒã‚¤ãƒ†ã‚£ãƒ–ã§ã‚µãƒãƒ¼ãƒˆã—ã€å‹•ç”»ãƒ‡ãƒ¼ã‚¿ã‚’ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«ã§ç›´æ¥å‡¦ç†ã§ãã‚‹ç‚¹ãŒæ±ºã‚æ‰‹ã§ã™ã€‚å‹•ç”»ç´ æã®å†…å®¹ç†è§£ã‚’ãƒ†ã‚­ã‚¹ãƒˆã«å¤‰æ›ã™ã‚‹`videoSummary`ã¯ã€å‹•ç”»ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ç›´æ¥Geminiã«æ¸¡ã™ã“ã¨ã§å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚’åˆ¥é€”OCRã‚„éŸ³å£°èªè­˜ã§ä»£æ›¿ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãŒè¤‡é›‘åŒ–ã—ã€æ’®å½±ç¾å ´ã§ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ€§ãŒæãªã‚ã‚Œã¾ã™ã€‚

### ãªãœCloud Video Intelligenceã‚’çµ„ã¿åˆã‚ã›ãŸã‹

Geminiã«ã‚ˆã‚‹æ„å‘³çš„ãªç†è§£ã¨ã€Video Intelligenceã«ã‚ˆã‚‹ã‚·ãƒ§ãƒƒãƒˆå¢ƒç•Œã®ç‰©ç†çš„æ¤œå‡ºã¯å½¹å‰²ãŒç•°ãªã‚Šã¾ã™ã€‚ã€Œã„ã¤ã‚·ãƒ¼ãƒ³ãŒåˆ‡ã‚Šæ›¿ã‚ã£ãŸã‹ã€ã®æ­£ç¢ºãªæ™‚åˆ»æƒ…å ±ã¯Video IntelligenceãŒå¾—æ„ã¨ã™ã‚‹é ˜åŸŸã§ã‚ã‚Šã€ã“ã‚Œã‚’Geminiã®è¦–è¦šè¦ç´„ã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã®`startSec/endSec`ã‚’ç²¾åº¦é«˜ãæ§‹é€ åŒ–ã§ãã¾ã™ã€‚

---

## 5. æŠ€è¡“çš„ãªæ„æ€æ±ºå®šâ€”â€”ã€Œå‹•ã‘ã°ã‚ˆã„ã€ã‚’é¸ã°ãªã‹ã£ãŸç†ç”±

PoCã¨ã„ã†åˆ¶ç´„ã®ä¸­ã§ã€ç§ãŸã¡ãŒã‚ãˆã¦ã€Œæ‰‹ã‚’æŠœã‹ãªã‹ã£ãŸã€å ´æ‰€ãŒã‚ã‚Šã¾ã™ã€‚

**ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿ã®äººæ‰‹æŠ•è³‡**ãŒãã®æœ€ãŸã‚‹ä¾‹ã§ã™ã€‚AIã®ææ¡ˆå“è³ªã¯ãƒ¢ãƒ‡ãƒ«æ€§èƒ½ã ã‘ã§ã¯æ±ºã¾ã‚Šã¾ã›ã‚“ã€‚ãƒãƒ¼ãƒ ã§å‚è€ƒå‹•ç”»ã‚’30æœ¬ä»¥ä¸Šé¸å®šã—ã€å„å‹•ç”»ã‚’æ§‹æˆã®å‹ã«åˆ†è§£ã—ã¦ã€`segments`ï¼ˆ`order`, `startSec`, `endSec`, `description`ï¼‰ã¨ã—ã¦æ§‹é€ åŒ–ã—ã¾ã—ãŸã€‚Firestoreã®`templates`ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã¸ã®æŠ•å…¥ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆ`add-template-to-firestore.js`ï¼‰ã‚‚æ•´å‚™ã—ã€æ„Ÿè¦šçš„ãªé‹ç”¨ã§ã¯ãªããƒ‡ãƒ¼ã‚¿ç®¡ç†ãƒ—ãƒ­ã‚»ã‚¹ã¨ã—ã¦å›ºå®šã—ã¦ã„ã¾ã™ã€‚ã“ã®åœ°é“ãªä½œæ¥­ãŒã‚ã£ã¦åˆã‚ã¦ã€ãƒãƒ£ãƒƒãƒˆãŒã€Œæ’®å½±é †ã¾ã§è½ã¨ã—ãŸå…·ä½“çš„ãªææ¡ˆã€ã‚’è¿”ã›ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

**ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆã‚’æœ€åˆã‹ã‚‰é–‰ã˜ãŸ**ã“ã¨ã‚‚æ„è­˜çš„ãªé¸æŠã§ã™ã€‚PoCã§ã¯å‹•ä½œå„ªå…ˆã§æ¨©é™è¨­è¨ˆãŒå¾Œå›ã—ã«ãªã‚ŠãŒã¡ã§ã™ãŒã€æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯`video_analysis_jobs`ã®create/update/deleteã‚’ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ç¦æ­¢ã—ã€å‚ç…§ã¯èªè¨¼æ¸ˆã¿ã‹ã¤æœ¬äººã‚¸ãƒ§ãƒ–ã®ã¿ã«é™å®šã—ã¦ã„ã¾ã™ã€‚Storageã¸ã®æ›¸ãè¾¼ã¿ã‚‚æœ¬äººUIDé…ä¸‹ã®ã¿ã«åˆ¶é™ã—ã¾ã—ãŸã€‚ã€Œæœ€åˆã¯ç·©ãã€ã§ã¯ãªãã€Œæœ€åˆã‹ã‚‰é–‰ã˜ã‚‹ã€ã¨ã„ã†å“²å­¦ãŒã€æ‹¡å¼µæ™‚ã®ç ´ç¶»ãƒªã‚¹ã‚¯ã‚’ä¸‹ã’ã¾ã™ã€‚

**å‹•ç”»è§£æã®éåŒæœŸã‚¸ãƒ§ãƒ–åŒ–**ã‚‚ã€ä¿¡é ¼æ€§ã‚’å„ªå…ˆã—ãŸåˆ¤æ–­ã§ã™ã€‚é‡å‡¦ç†ã‚’ã‚¢ãƒ—ãƒªå†…ã§åŒæœŸçš„ã«æŠ±ãˆã‚‹ã¨ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ–­ã‚„å‡¦ç†ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ãŒå£Šã‚Œã¾ã™ã€‚Callable Functionã§ã‚¸ãƒ§ãƒ–ã‚’ä½œæˆã—ã€Firestoreãƒˆãƒªã‚¬ãƒ¼ãŒ`queued â†’ processing â†’ completed/failed`ã‚’é·ç§»ã—ãªãŒã‚‰ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹è¨­è¨ˆã«ã—ã¾ã—ãŸã€‚å…¥åŠ›åˆ¶ç´„ï¼ˆæœ€å¤§180ç§’ãƒ»300MBï¼‰ã‚‚æ˜ç¤ºçš„ã«å®šã‚ã€PoCæ®µéšã‹ã‚‰é‹ç”¨ã‚’è¦‹æ®ãˆãŸåŸºç›¤ã‚’é¸ã‚“ã§ã„ã¾ã™ã€‚

**ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ç–çµåˆè¨­è¨ˆ**ã¯ã€ãƒãƒ¼ãƒ é–‹ç™ºã®æ‘©æ“¦ã‚’æ¸›ã‚‰ã™ãŸã‚ã§ã‚‚ã‚ã‚Šã¾ã—ãŸã€‚`DIContainer`ã«ã‚ˆã‚‹ä¾å­˜æ€§æ³¨å…¥ã§Live/Mockã‚’åˆ‡æ›¿å¯èƒ½ã«ã—ã€4äººãŒä¸¦è¡Œã—ã¦æ©Ÿèƒ½ã‚’é–‹ç™ºã—ã¦ã‚‚ã€ä»–ã®æ©Ÿèƒ½ã«å‰¯ä½œç”¨ãŒå‡ºã«ãã„æ§‹é€ ã‚’ä¿ã£ã¦ã„ã¾ã™ã€‚`ProjectLifecycleManager`ã§`recording / editing / completed`ã®çŠ¶æ…‹é·ç§»ã‚’æ˜ç¤ºçš„ã«ã‚³ãƒ¼ãƒ‰ã§ç®¡ç†ã™ã‚‹ã“ã¨ã§ã€æ©Ÿèƒ½è¿½åŠ æ™‚ã«ã€Œã©ã®çŠ¶æ…‹ã§ã©ã®UIãŒå‡ºã‚‹ã‹ã€ã‚’å¸¸ã«è¿½è·¡å¯èƒ½ã«ã—ã¦ã„ã¾ã™ã€‚

---

## 6. ä»Šå¾Œã®å±•é–‹â€”â€”ã€Œå®Œèµ°ç‡ã€ã‚’æ•°å­—ã§è¨¼æ˜ã™ã‚‹ãŸã‚ã«

ç¾æ™‚ç‚¹ã§ã¯ã€å®Ÿãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã®å®šé‡KPIã¯ã¾ã æœªè¨ˆæ¸¬ã§ã™ã€‚ã“ã“ã¯æ­£ç›´ã«ã€æ–­å®šã›ãšè¨˜ã—ã¾ã™ã€‚

æ¬¡ãƒ•ã‚§ãƒ¼ã‚ºã§è¿½è·¡ã™ã‚‹ä¸»ãªæŒ‡æ¨™ã¯3ã¤ã§ã™ã€‚æŠ•ç¨¿å®Œäº†ç‡ï¼ˆé–‹å§‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã†ã¡æœ€çµ‚æ›¸ãå‡ºã—ã¾ã§åˆ°é”ã—ãŸå‰²åˆï¼‰ã€1æœ¬å®Œæˆã¾ã§ã®æ‰€è¦æ™‚é–“ï¼ˆåˆå›ãƒãƒ£ãƒƒãƒˆå…¥åŠ›ã‹ã‚‰æ›¸ãå‡ºã—å®Œäº†ã¾ã§ï¼‰ã€ãã—ã¦å†ç·¨é›†ç‡ï¼ˆåŒä¸€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å†é–‹å›æ•°ï¼‰ã€‚ã“ã®3ã¤ãŒæ”¹å–„ã•ã‚Œã‚Œã°ã€ãƒ•ãƒ­ãƒ¼åˆ†æ–­ã®è§£æ¶ˆã¨ã„ã†ä»®èª¬ãŒæ¤œè¨¼ã•ã‚ŒãŸã“ã¨ã«ãªã‚Šã¾ã™ã€‚

ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ææ¡ˆç²¾åº¦å‘ä¸Šã‚‚ç¶™ç¶šçš„ãªèª²é¡Œã§ã™ã€‚æ¯æ•°ã®æ‹¡å¼µã€ã‚¸ãƒ£ãƒ³ãƒ«åˆ¥ã®ã‚»ã‚°ãƒ¡ãƒ³ãƒˆç²’åº¦ã®è¦‹ç›´ã—ã€å¤±æ•—ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®åˆ†æã«ã‚ˆã‚‹è³ªå•ãƒ•ãƒ­ãƒ¼æœ€é©åŒ–ã‚’æ®µéšçš„ã«é€²ã‚ã¾ã™ã€‚

é•·æœŸçš„ã«ã¯ã€ã“ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãŒç›®æŒ‡ã™ã®ã¯ã€Œå‹•ç”»ã‚’æ’®ã£ãŸã“ã¨ã®ãªã„äººãŒã€åˆã‚ã¦1æœ¬ã‚’å®Œæˆã•ã›ã‚‹ä½“é¨“ã€ã§ã™ã€‚ãã“ãŒé”æˆã•ã‚ŒãŸã¨ãã€å‹•ç”»ã¯ä¸€éƒ¨ã®ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ã®è¡¨ç¾æ‰‹æ®µã‹ã‚‰ã€å†™çœŸã¨åŒã˜æ„Ÿè¦šã§ä½¿ãˆã‚‹ç™ºä¿¡ãƒ„ãƒ¼ãƒ«ã¸ã¨å¤‰ã‚ã‚Šã¾ã™ã€‚ç§ãŸã¡ãŒæœ¬å½“ã«è§£ããŸã„ã®ã¯ã€ãã®å¤‰åŒ–ã‚’èµ·ã“ã™ãŸã‚ã®ã€Œæœ€åˆã®1æœ¬ã€ã®å£ã§ã™ã€‚

---

## ã¾ã¨ã‚

ZennVlogã¯ã€å‹•ç”»åˆ¶ä½œã‚’ã€Œç·¨é›†æ©Ÿèƒ½ã®æä¾›ã€ã§ã¯ãªãã€**ä¼ç”»ã‹ã‚‰å®Œèµ°ã¾ã§ã‚’æ”¯ãˆã‚‹åˆ¶ä½œå°ç·šã®æä¾›**ã¨ã—ã¦å†å®šç¾©ã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚

å¤§å­¦ç”Ÿ4äººãƒãƒ¼ãƒ ã¨ã—ã¦ã€åŒä¸–ä»£ã®ã€Œå‹•ç”»ã‚’è¦‹ã‚‹ã®ã«ä½œã‚‰ãªã„ã€ä¹–é›¢ã‚’å®Ÿæ„Ÿã—ã€ãã®åŸå› ã‚’åˆ¶ä½œãƒ•ãƒ­ãƒ¼ã®åˆ†æ–­ã¨ã—ã¦è§£ãã»ãã—ã€AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨å®Ÿè£…åŸºç›¤ã§åŸ‹ã‚ã‚‹ã“ã¨ã«æŒ‘æˆ¦ã—ã¾ã—ãŸã€‚

ãƒ¢ãƒ‡ãƒ«ç²¾åº¦ã ã‘ã§ãªãã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿è¨­è¨ˆã€éåŒæœŸã‚¸ãƒ§ãƒ–åŸºç›¤ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆã€çŠ¶æ…‹é·ç§»ç®¡ç†ã¾ã§ä¸€ä½“ã§ä½œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ãã®åœŸå°ã‚’æ§‹ç¯‰ã—ãŸPoCã§ã‚ã‚Šã€æ¬¡ãƒ•ã‚§ãƒ¼ã‚ºã§ã¯KPIè¨ˆæ¸¬ã‚’é€šã˜ã¦æœ‰åŠ¹æ€§ã‚’å®šé‡ã§è¨¼æ˜ã—ã¦ã„ãã¾ã™ã€‚

| å¯©æŸ»åŸºæº–         | æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®ä¸»å¼µ                                                                                                    |
| ---------------- | ------------------------------------------------------------------------------------------------------------------------- |
| èª²é¡Œã®æ–°è¦æ€§     | å•é¡Œã¯ç·¨é›†å˜ä½“ã§ã¯ãªãã€ä¼ç”»ãƒ»æ’®å½±ãƒ»ç·¨é›†ã®åˆ†æ–­ã«ã‚ã‚‹ã€‚è‹¥ã„å±¤ã§ã‚‚ã€Œè¦‹ã‚‹ã€ã¨ã€Œä½œã‚‹ã€ãŒä¹–é›¢ã—ã¦ã„ã‚‹æ§‹é€ çš„ãªèª²é¡Œã«ç€ç›®ã—ãŸã€‚  |
| è§£æ±ºç­–ã®æœ‰åŠ¹æ€§   | Function Callingãƒ«ãƒ¼ãƒ—ã¨éåŒæœŸå‹•ç”»è§£æã‚¸ãƒ§ãƒ–ã«ã‚ˆã‚Šã€è‡ªç„¶è¨€èªå…¥åŠ›ã‚’å…·ä½“çš„ãªåˆ¶ä½œã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¸å¤‰æ›ã™ã‚‹Agenticè¨­è¨ˆã‚’å®Ÿç¾ã—ãŸã€‚ |
| å®Ÿè£…å“è³ªã¨æ‹¡å¼µæ€§ | DI/Repositoryåˆ†é›¢ã€æœ€å°æ¨©é™ãƒ«ãƒ¼ãƒ«å…ˆè¡Œã€çŠ¶æ…‹é·ç§»ç®¡ç†ã€çµ±åˆã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã«ã‚ˆã‚Šã€PoCã§ã‚‚é‹ç”¨ã‚’è¦‹æ®ãˆãŸè¨­è¨ˆã«ãªã£ã¦ã„ã‚‹ã€‚      |
